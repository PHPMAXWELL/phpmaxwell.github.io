<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Puzzle Escape Game - Montpellier</title>

    <!-- Feuilles de style -->
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/image-puzzle.css" rel="stylesheet" />

    <!-- Librairies JS -->
    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/image-puzzle.js"></script>
</head>

<body>
<div id="container">
    <div id="collage">
        <div style="display:flex;flex-direction:row;justify-content:center;align-items:center">
            <h2 style="color:#222; font-weight:bold; font-size:30px; padding-right:10px">üß© Puzzle Images - Montpellier</h2>
            <a href="index.html">üè† Home</a>
        </div>
        <hr />

        <!-- Zone de jeu -->
        <div id="playPanel" style="padding:5px; display:none;">
            <div style="display:inline-block; margin:auto; width:95%; vertical-align:top;">
                <ul id="sortable" class="sortable"></ul>

                <div id="actualImageBox">
                    <div id="stepBox">
                        <div>Mouvements :</div><div class="stepCount">0</div>
                    </div>

                    <img id="actualImage" alt="Image actuelle du puzzle" />

                    <div>R√©arrangez les pi√®ces pour reconstituer l'image.</div>

                    <p id="levelPanel">
                        <input type="radio" name="level" id="hard" checked="checked" value="4" /> 
                        <label for="hard">Puzzle Picture</label>
                    </p>
                </div>
            </div>
        </div>

        <!-- Fin du jeu -->
        <div id="gameOver" style="display:none;">
            <script>
                clearTimeout(t);
            </script>
            <div style="padding: 5px 10px 20px 10px; text-align: center;">
                <h2 style="text-align:center">C'est termin√© !</h2>
                F√©licitations üéâ !!<br>Vous avez termin√© cette image en 
                <span class="stepCount">0</span> mouvements.<br><br>
                <button onclick="window.location.reload()">Rejouer</button>
            </div>
        </div>
    </div>

    <!-- Timer -->
    <div style="background:#000; color:#eee; padding:1px; text-align:center;">
        <h1><time>00:00:00</time></h1>
        <footer>Workshop EPSI 2025</footer>
    </div>
</div>

<script>
    const images = [
        { src: "images/antigone.jpg" },
        { src: "images/cathedrale-st-pierre.jpg" },
        { src: "images/centre-historique.jpg" },
        { src: "images/fontaine-comedie.jpg" },
        { src: "images/port-marianne.jpg" }
    ];

    $(function () {
        let gridSize = $('#levelPanel :radio:checked').val();
        imagePuzzle.startGame(images, gridSize);

        $('#newPhoto').click(function () {
            imagePuzzle.startGame(images, gridSize);
        });

        $('#levelPanel :radio').change(function () {
            let gridSize = $(this).val();
            imagePuzzle.startGame(images, gridSize);
        });
    });

    // --- Timer ---
    var h1 = document.getElementsByTagName('h1')[0],
        seconds = 0, minutes = 0, hours = 0,
        t;

    function add() {
        seconds++;
        if (seconds >= 60) {
            seconds = 0;
            minutes++;
            if (minutes >= 60) {
                minutes = 0;
                hours++;
            }
        }

        h1.textContent = 
            (hours > 9 ? hours : "0" + hours) + ":" +
            (minutes > 9 ? minutes : "0" + minutes) + ":" +
            (seconds > 9 ? seconds : "0" + seconds);

        timer();
    }

    function timer() {
        t = setTimeout(add, 1000);
    }
    timer();
</script>
</body>
</html>
